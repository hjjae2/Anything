## Metadata

### BATCH_JOB_INSTANCE

**JOB INSTANCE 정보**

```text
+---------------+-------+--------------------------+--------------------------------+
|JOB_INSTANCE_ID|VERSION|JOB_NAME                  |JOB_KEY                         |
+---------------+-------+--------------------------+--------------------------------+
|54             |0      |2022-02-26T18:50:40.703155|58e1898e417c22a4728898e6a35e76f0|
|55             |0      |2022-02-26T18:51:29.449640|58e1898e417c22a4728898e6a35e76f0|
+---------------+-------+--------------------------+--------------------------------+
```

<br>

### BATCH_JOB_EXECUTION

**JOB INSTANCE 실행 기록**

- JOB INSTANCE ID
- 생성 시간
- 시작 시간
- 종료 시간
- 상태
- EXIT 상태
- EXIT 메시지
- ...


> 에러 로그는 상세히 기록된다. stackTrace 가 그대로 기록되는 것 같다.
> e.g.) org.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [update set ~~~ where ???] nested exception is org.hibernate.exception.DataException: could not execute batch ...
> e.g.) All steps already completed or no steps configured for this job. (NOOP 상태 일 때)


```text
+----------------+-------+---------------+-------------------+-------------------+-------------------+---------+---------+------------+-------------------+--------------------------+
|JOB_EXECUTION_ID|VERSION|JOB_INSTANCE_ID|CREATE_TIME        |START_TIME         |END_TIME           |STATUS   |EXIT_CODE|EXIT_MESSAGE|LAST_UPDATED       |JOB_CONFIGURATION_LOCATION|
+----------------+-------+---------------+-------------------+-------------------+-------------------+---------+---------+------------+-------------------+--------------------------+
|6               |2      |3              |2022-02-21 16:42:35|2022-02-21 16:42:35|2022-02-21 16:42:35|FAILED   |FAILED   |   에러로그   |2022-02-21 16:42:35|NULL                      |
|7               |2      |3              |2022-02-21 16:42:56|2022-02-21 16:42:56|2022-02-21 16:42:56|COMPLETED|NOOP     |  NOOP 로그  |2022-02-21 16:42:56|NULL                      |
|8               |2      |3              |2022-02-21 17:44:42|2022-02-21 17:44:42|2022-02-21 17:44:42|COMPLETED|NOOP     |  NOOP 로그  |2022-02-21 17:44:42|NULL                      |
|..              |.      |..             |2022-02-26 18:50:42|2022-02-26 18:50:43|2022-02-26 18:50:45|COMPLETED|COMPLETED|            |2022-02-26 18:50:45|NULL                      |
|71              |2      |54             |2022-02-26 18:50:42|2022-02-26 18:50:43|2022-02-26 18:50:45|COMPLETED|COMPLETED|            |2022-02-26 18:50:45|NULL                      |
|72              |2      |55             |2022-02-26 18:51:31|2022-02-26 18:51:31|2022-02-26 18:51:33|COMPLETED|COMPLETED|            |2022-02-26 18:51:33|NULL                      |
+----------------+-------+---------------+-------------------+-------------------+-------------------+---------+---------+------------+-------------------+--------------------------+
```

<br>

### BATCH_JOB_EXECUTION_PARAMS

**JOB EXECUTION PARAMETER 정보**

> Job 실행 시 넘긴 파라미터 정보가 기록된다.

(JOB_EXECUTION_ID) JOB_EXECUTION 을 바라본다.

```text
+----------------+-------+--------+----------+-------------------+--------+----------+-----------+
|JOB_EXECUTION_ID|TYPE_CD|KEY_NAME|STRING_VAL|DATE_VAL           |LONG_VAL|DOUBLE_VAL|IDENTIFYING|
+----------------+-------+--------+----------+-------------------+--------+----------+-----------+
|42              |STRING |version |1.3       |1970-01-01 09:00:00|0       |0         |Y          |
|43              |STRING |version |1.3       |1970-01-01 09:00:00|0       |0         |Y          |
+----------------+-------+--------+----------+-------------------+--------+----------+-----------+
```

<br>

### BATCH_JOB_EXECUTION_CONTEXT

**JOB EXECUTION CONTEXT 정보**

(JOB_EXECUTION_ID) JOB_EXECUTION 을 바라본다.

```text
+----------------+------------------------------+------------------+
|JOB_EXECUTION_ID|SHORT_CONTEXT                 |SERIALIZED_CONTEXT|
+----------------+------------------------------+------------------+
|67              |{"@class":"java.util.HashMap"}|NULL              |
|68              |{"@class":"java.util.HashMap"}|NULL              |
|69              |{"@class":"java.util.HashMap"}|NULL              |
+----------------+------------------------------+------------------+
```

<br>

### BATCH_STEP_EXECUTION

**STEP 실행 기록**

- JOB EXECUTION ID
- 이름
- 생성 시간
- 시작 시간
- 종료 시간
- 상태
- COMMIT COUNT
- FILTER COUNT
- WRITE COUNT
- ROLLBACK COUNT
- ...
- EXIT 상태
- EXIT 메시지
- ...

> 에러 로그는 상세히 기록된다. stackTrace 가 그대로 기록되는 것 같다.
> e.g.) org.springframework.dao.DataIntegrityViolationException: could not execute batch; SQL [update set ~~~ where ???] nested exception is org.hibernate.exception.DataException: could not execute batch ...
> e.g.) All steps already completed or no steps configured for this job. (NOOP 상태 일 때)

```text
+-----------------+-------+---------+----------------+-------------------+-------------------+---------+------------+----------+------------+-----------+---------------+----------------+------------------+--------------+---------+------------+-------------------+
|STEP_EXECUTION_ID|VERSION|STEP_NAME|JOB_EXECUTION_ID|START_TIME         |END_TIME           |STATUS   |COMMIT_COUNT|READ_COUNT|FILTER_COUNT|WRITE_COUNT|READ_SKIP_COUNT|WRITE_SKIP_COUNT|PROCESS_SKIP_COUNT|ROLLBACK_COUNT|EXIT_CODE|EXIT_MESSAGE|LAST_UPDATED       |
+-----------------+-------+---------+----------------+-------------------+-------------------+---------+------------+----------+------------+-----------+---------------+----------------+------------------+--------------+---------+------------+-------------------+
|5                |2      |step1    |13              |2022-02-21 18:19:31|2022-02-21 18:19:31|COMPLETED|0           |0         |0           |0          |0              |0               |0                 |1             |FAILED   |   에러로그   |2022-02-21 18:19:31|
|6                |3      |step1    |14              |2022-02-21 18:20:20|2022-02-21 18:20:21|COMPLETED|1           |0         |0           |0          |0              |0               |0                 |0             |COMPLETED|            |2022-02-21 18:20:21|
|7                |3      |step2    |14              |2022-02-21 18:20:21|2022-02-21 18:20:21|COMPLETED|1           |0         |0           |0          |0              |0               |0                 |0             |COMPLETED|            |2022-02-21 18:20:21|
+-----------------+-------+---------+----------------+-------------------+-------------------+---------+------------+----------+------------+-----------+---------------+----------------+------------------+--------------+---------+------------+-------------------+

...

+-----------------+-------+---------+----------------+-------------------+-------------------+---------+------------+----------+------------+-----------+---------------+----------------+------------------+--------------+---------+------------+-------------------+
|STEP_EXECUTION_ID|VERSION|STEP_NAME|JOB_EXECUTION_ID|START_TIME         |END_TIME           |STATUS   |COMMIT_COUNT|READ_COUNT|FILTER_COUNT|WRITE_COUNT|READ_SKIP_COUNT|WRITE_SKIP_COUNT|PROCESS_SKIP_COUNT|ROLLBACK_COUNT|EXIT_CODE|EXIT_MESSAGE|LAST_UPDATED       |
+-----------------+-------+---------+----------------+-------------------+-------------------+---------+------------+----------+------------+-----------+---------------+----------------+------------------+--------------+---------+------------+-------------------+
|60               |3      |step1    |66              |2022-02-26 18:19:52|2022-02-26 18:19:53|COMPLETED|1           |7         |0           |7          |0              |0               |0                 |0             |COMPLETED|            |2022-02-26 18:19:53|
|61               |3      |step1    |67              |2022-02-26 18:36:26|2022-02-26 18:36:27|COMPLETED|1           |7         |0           |7          |0              |0               |0                 |0             |COMPLETED|            |2022-02-26 18:36:27|
+-----------------+-------+---------+----------------+-------------------+-------------------+---------+------------+----------+------------+-----------+---------------+----------------+------------------+--------------+---------+------------+-------------------+

```

<br>

### BATCH_STEP_EXECUTION_CONTEXT

**JOB EXECUTION CONTEXT 정보**

```text
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------+
|STEP_EXECUTION_ID|SHORT_CONTEXT                                                                                                                                                                                                                        |SERIALIZED_CONTEXT|
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------+
|65               |{"@class":"java.util.HashMap","batch.taskletType":"org.springframework.batch.core.step.item.ChunkOrientedTasklet","batch.stepType":"org.springframework.batch.core.step.tasklet.TaskletStep","AbstractPagingItemReader.read.count":8}|NULL              |
|66               |{"@class":"java.util.HashMap","batch.taskletType":"org.springframework.batch.core.step.item.ChunkOrientedTasklet","batch.stepType":"org.springframework.batch.core.step.tasklet.TaskletStep","AbstractPagingItemReader.read.count":8}|NULL              |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------+
```